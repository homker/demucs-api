<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCPåè®®æ”¯æŒ - Demucs éŸ³é¢‘åˆ†ç¦»å·¥å…·</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
    <header>
        <div class="container">
            <h1>ğŸ”— MCP (Model Context Protocol) æ”¯æŒ</h1>
            <p>æ ‡å‡†MCPåè®®é›†æˆï¼Œä¸Claude Desktopã€Cursorç­‰å·¥å…·æ— ç¼è¿æ¥</p>
            <div class="main-nav">
                <a href="/" class="nav-link">ğŸ  é¦–é¡µ</a>
                <a href="/mcp" class="nav-link active">ğŸ”— MCPåè®®</a>
                <a href="/api-docs" class="nav-link">ğŸ“š APIæ–‡æ¡£</a>
                <a href="/docs" class="nav-link">ğŸ“– ä½¿ç”¨æŒ‡å—</a>
                <a href="/test-guide" class="nav-link">ğŸ§ª æµ‹è¯•æŒ‡å—</a>
                <a href="/admin" class="nav-link">ğŸ› ï¸ ç®¡ç†é¢æ¿</a>
            </div>
        </div>
    </header>
    
    <div class="container container-sm">
        <div class="card">
            <h2>âœ¨ æ ‡å‡†MCPåè®®é›†æˆ</h2>
            <p>æœ¬åº”ç”¨å®Œå…¨æ”¯æŒ <strong>MCP (Model Context Protocol)</strong> åè®®ï¼è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨ä»»ä½•æ”¯æŒMCPçš„å®¢æˆ·ç«¯ä¸­ä½¿ç”¨æˆ‘ä»¬çš„éŸ³é¢‘åˆ†ç¦»æœåŠ¡ã€‚</p>
            
            <div class="highlight-box">
                <h4>ğŸ¯ MCPå®¢æˆ·ç«¯é…ç½®</h4>
                <p><strong>æœåŠ¡å™¨ç«¯ç‚¹:</strong> <code>http://localhost:8080/mcp</code></p>
                <p><strong>åè®®:</strong> JSON-RPC 2.0 over HTTP</p>
                <p><strong>æ–¹æ³•:</strong> POST</p>
                <p><strong>Content-Type:</strong> application/json</p>
            </div>
            
            <div style="text-align: center; margin: 30px 0;">
                <a href="/test/mcp" class="test-button">
                    ğŸ§ª æµ‹è¯•MCPåŠŸèƒ½
                </a>
            </div>
        </div>
        
        <div class="card">
            <h2>ğŸ› ï¸ å¯ç”¨çš„MCPå·¥å…·</h2>
            <div class="tools-grid">
                <div class="tool-card">
                    <h5><strong>separate_audio</strong></h5>
                    <p>ä½¿ç”¨Demucsæ¨¡å‹åˆ†ç¦»éŸ³é¢‘æ–‡ä»¶</p>
                    <p><small><strong>å‚æ•°:</strong> file_path, model, stems, stream_progress</small></p>
                </div>
                <div class="tool-card">
                    <h5><strong>get_models</strong></h5>
                    <p>è·å–å¯ç”¨çš„Demucsæ¨¡å‹åˆ—è¡¨</p>
                    <p><small><strong>å‚æ•°:</strong> æ— éœ€å‚æ•°</small></p>
                </div>
                <div class="tool-card">
                    <h5><strong>get_job_status</strong></h5>
                    <p>æŸ¥è¯¢éŸ³é¢‘åˆ†ç¦»ä»»åŠ¡çš„çŠ¶æ€</p>
                    <p><small><strong>å‚æ•°:</strong> job_id</small></p>
                </div>
            </div>
        </div>
        
        <div class="card">
            <h2>ğŸ“š å¯ç”¨çš„MCPèµ„æº</h2>
            <ul>
                <li><code>demucs://docs/api</code> - å®Œæ•´çš„APIä½¿ç”¨æ–‡æ¡£</li>
                <li><code>demucs://models/info</code> - è¯¦ç»†çš„æ¨¡å‹ä¿¡æ¯å’Œç‰¹æ€§</li>
            </ul>
        </div>
        
        <div class="card">
            <h2>ğŸŒŠ æµå¼è¿›åº¦æ”¯æŒ</h2>
            <p>æˆ‘ä»¬çš„MCPå®ç°æ”¯æŒSSE (Server-Sent Events) æµå¼è¿›åº¦æ›´æ–°ï¼Œæ‚¨å¯ä»¥å®æ—¶ç›‘æ§éŸ³é¢‘åˆ†ç¦»çš„è¿›åº¦ï¼š</p>
            <code>GET http://localhost:8080/mcp/stream/{job_id}</code>
        </div>
        
        <div class="card">
            <h2>ğŸ“‹ MCPåè®®ä½¿ç”¨ç¤ºä¾‹</h2>
            
            <h4>1. åˆå§‹åŒ–è¿æ¥:</h4>
            <pre>{
  "jsonrpc": "2.0",
  "id": 1,
  "method": "initialize",
  "params": {
    "protocolVersion": "1.0",
    "capabilities": {},
    "clientInfo": {
      "name": "your-client-name",
      "version": "1.0.0"
    }
  }
}</pre>
            
            <h4>2. è°ƒç”¨éŸ³é¢‘åˆ†ç¦»å·¥å…·:</h4>
            <pre>{
  "jsonrpc": "2.0",
  "id": 2,
  "method": "tools/call",
  "params": {
    "name": "separate_audio",
    "arguments": {
      "file_path": "/path/to/audio.mp3",
      "model": "htdemucs",
      "stems": ["vocals", "drums"],
      "stream_progress": true
    }
  }
}</pre>
            
            <h4>3. è·å–å¯ç”¨å·¥å…·:</h4>
            <pre>{
  "jsonrpc": "2.0",
  "id": 3,
  "method": "tools/list",
  "params": {}
}</pre>
            
            <div class="tip">
                <strong>ğŸ’¡ é›†æˆæç¤º:</strong> è¿™ä¸ªæ ‡å‡†MCPå®ç°å¯ä»¥ä¸Claude Desktopã€Cursorç­‰æ”¯æŒMCPçš„å·¥å…·æ— ç¼é›†æˆã€‚
                åªéœ€åœ¨å®¢æˆ·ç«¯é…ç½®ä¸­æ·»åŠ æˆ‘ä»¬çš„æœåŠ¡å™¨ç«¯ç‚¹å³å¯å¼€å§‹ä½¿ç”¨ï¼
            </div>
        </div>
        
        <div class="card">
            <h2>ğŸ”§ å®¢æˆ·ç«¯é›†æˆæŒ‡å—</h2>
            
            <h3>Claude Desktop é›†æˆ</h3>
            <p>åœ¨Claude Desktopçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ :</p>
            <pre>{
  "mcpServers": {
    "demucs": {
      "command": "node",
      "args": ["path/to/mcp-client.js"],
      "env": {
        "DEMUCS_SERVER_URL": "http://localhost:8080/mcp"
      }
    }
  }
}</pre>
            
            <h3>Cursor é›†æˆ</h3>
            <p>åœ¨Cursorçš„è®¾ç½®ä¸­é…ç½®MCPæœåŠ¡å™¨ç«¯ç‚¹:</p>
            <pre>MCP Server URL: http://localhost:8080/mcp
Protocol: JSON-RPC 2.0
Transport: HTTP</pre>
            
            <h3>è‡ªå®šä¹‰å®¢æˆ·ç«¯</h3>
            <p>æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•æ”¯æŒJSON-RPC 2.0çš„å®¢æˆ·ç«¯åº“æ¥é›†æˆæˆ‘ä»¬çš„MCPæœåŠ¡å™¨ã€‚</p>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>DemucséŸ³é¢‘åˆ†ç¦»å·¥å…· &copy; 2024 | åŸºäº<a href="https://github.com/facebookresearch/demucs" style="color: white; text-decoration: underline;">Demucs</a>å¼€å‘</p>
        </div>
    </footer>
</body>
</html> 