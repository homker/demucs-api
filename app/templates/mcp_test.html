<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP 音频分离服务器测试</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>🎵 MCP 音频分离服务器测试</h1>
            
            <div class="page-nav">
                <a href="{{ url_for('main.index') }}" class="nav-link">← 返回主页</a>
            </div>
            
            <div class="grid">
                <div class="test-section">
                    <h2>服务器状态</h2>
                    <button class="btn btn-primary" onclick="checkHealth()">检查健康状态</button>
                    <button class="btn btn-secondary" onclick="getCapabilities()">获取服务器能力</button>
                    <div id="healthOutput" class="output" style="min-height: 100px;"></div>
                </div>
                
                <div class="test-section">
                    <h2>工具和资源</h2>
                    <button class="btn btn-primary" onclick="listTools()">列出工具</button>
                    <button class="btn btn-primary" onclick="listResources()">列出资源</button>
                    <button class="btn btn-accent" onclick="getModels()">获取模型</button>
                    <div id="toolsOutput" class="output" style="min-height: 100px;"></div>
                </div>
            </div>
            
            <div class="test-section">
                <h2>音频分离测试</h2>
                <div class="form-group">
                    <label>模型选择:</label>
                    <select id="modelSelect" class="w-100">
                        <option value="htdemucs">htdemucs - 默认高质量</option>
                        <option value="htdemucs_ft">htdemucs_ft - 微调版本</option>
                        <option value="htdemucs_6s">htdemucs_6s - 6音轨版本</option>
                        <option value="mdx">mdx - 平衡型</option>
                        <option value="mdx_q">mdx_q - 快速版本</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label>音轨选择:</label><br>
                    <label><input type="checkbox" value="vocals" checked> 人声</label>
                    <label><input type="checkbox" value="drums"> 鼓点</label>
                    <label><input type="checkbox" value="bass"> 贝斯</label>
                    <label><input type="checkbox" value="other"> 其他</label>
                    <label><input type="checkbox" value="piano"> 钢琴</label>
                    <label><input type="checkbox" value="guitar"> 吉他</label>
                </div>
                
                <button class="btn btn-success" onclick="startAudioSeparation()">开始模拟音频分离</button>
                <button class="btn btn-danger" onclick="stopStream()">停止流</button>
                
                <div id="progressContainer" class="progress-container" style="display: none;">
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill gradient"></div>
                    </div>
                    <div id="progressText" class="progress-text">准备中...</div>
                </div>
                
                <div id="separationOutput" class="output" style="min-height: 200px;"></div>
            </div>
            
            <div class="test-section">
                <h2>实时日志</h2>
                <button class="btn btn-secondary" onclick="clearLogs()">清空日志</button>
                <div id="logOutput" class="output" style="min-height: 150px;"></div>
            </div>
        </div>
    </div>

    <!-- JavaScript文件 -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='js/audio-processor.js') }}"></script>
</body>
</html> 