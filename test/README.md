# Demucs æµ‹è¯•ç›®å½•

æœ¬ç›®å½•åŒ…å«äº† Demucs éŸ³é¢‘åˆ†ç¦»åº”ç”¨çš„æ‰€æœ‰æµ‹è¯•ä»£ç ã€‚æµ‹è¯•æŒ‰åŠŸèƒ½å’Œç±»å‹è¿›è¡Œç»„ç»‡ï¼Œç¡®ä¿ä»£ç è´¨é‡å’ŒåŠŸèƒ½æ­£ç¡®æ€§ã€‚

## ğŸ“ ç›®å½•ç»“æ„

```
test/
â”œâ”€â”€ unit/                    # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ test_admin_panel.py     # ç®¡ç†é¢æ¿åŠŸèƒ½æµ‹è¯•ï¼ˆåŒ…å«æ€§èƒ½æµ‹è¯•ï¼‰
â”‚   â”œâ”€â”€ test_api.py            # APIæ¥å£æµ‹è¯•ï¼ˆåŒ…å«åŸºç¡€ç«¯ç‚¹æµ‹è¯•ï¼‰
â”‚   â”œâ”€â”€ test_audio_format_quality.py  # éŸ³é¢‘æ ¼å¼å’Œè´¨é‡æµ‹è¯•
â”‚   â”œâ”€â”€ test_demucs.py         # Demucsæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_download_functionality.py  # ä¸‹è½½åŠŸèƒ½æµ‹è¯•
â”‚   â”œâ”€â”€ test_ffmpeg_compatibility.py   # FFmpegå…¼å®¹æ€§æµ‹è¯•
â”‚   â”œâ”€â”€ test_fixed_separator.py        # éŸ³é¢‘åˆ†ç¦»å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ test_full_app.py      # å®Œæ•´åº”ç”¨æµ‹è¯•
â”‚   â””â”€â”€ test_progress_feedback.py      # è¿›åº¦åé¦ˆæµ‹è¯•
â”œâ”€â”€ integration/             # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ test_api_response_format.py    # APIå“åº”æ ¼å¼é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ test_frontend_integration.py  # å‰ç«¯åŠŸèƒ½é›†æˆæµ‹è¯•
â”œâ”€â”€ mcp/                     # MCPåè®®æµ‹è¯•
â”‚   â”œâ”€â”€ client.py            # MCPå®¢æˆ·ç«¯æµ‹è¯•
â”‚   â””â”€â”€ README.md           # MCPæµ‹è¯•è¯´æ˜
â”œâ”€â”€ fixtures/                # æµ‹è¯•å›ºå®šæ•°æ®
â”œâ”€â”€ output/                  # æµ‹è¯•è¾“å‡ºç›®å½•
â”œâ”€â”€ run_tests.py             # æµ‹è¯•è¿è¡Œå™¨
â”œâ”€â”€ test_suite.py           # æµ‹è¯•å¥—ä»¶
â”œâ”€â”€ quick_test.py           # å¿«é€Ÿæµ‹è¯•è„šæœ¬
â””â”€â”€ README.md               # æœ¬æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œ
cd test
python run_tests.py --test all
```

### è¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•
```bash
# åªè¿è¡Œå•å…ƒæµ‹è¯•
python run_tests.py --category unit

# åªè¿è¡Œé›†æˆæµ‹è¯•
python run_tests.py --category integration

# åªè¿è¡ŒMCPåè®®æµ‹è¯•
python run_tests.py --category mcp

# è¿è¡Œç‰¹å®šåŠŸèƒ½æµ‹è¯•
python run_tests.py --test admin      # ç®¡ç†é¢æ¿æµ‹è¯•
python run_tests.py --test api        # APIæµ‹è¯•
python run_tests.py --test frontend   # å‰ç«¯æµ‹è¯•
```

### è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
```bash
# è¿è¡Œç®¡ç†é¢æ¿æµ‹è¯•
python unit/test_admin_panel.py

# è¿è¡ŒAPIå“åº”æ ¼å¼æµ‹è¯•
python integration/test_api_response_format.py

# è¿è¡Œå‰ç«¯é›†æˆæµ‹è¯•
python integration/test_frontend_integration.py
```

## ğŸ“Š æµ‹è¯•ç±»å‹è¯´æ˜

### å•å…ƒæµ‹è¯• (unit/)
æµ‹è¯•å•ä¸ªæ¨¡å—æˆ–åŠŸèƒ½çš„æ­£ç¡®æ€§ï¼ŒåŒ…æ‹¬ï¼š

- **test_admin_panel.py**: ç®¡ç†é¢æ¿åŠŸèƒ½å’Œæ€§èƒ½æµ‹è¯•
  - ç™»å½•/ç™»å‡ºåŠŸèƒ½
  - æ–‡ä»¶æ‰«ææ€§èƒ½
  - ä»»åŠ¡ç®¡ç†
  - æƒé™æ§åˆ¶

- **test_api.py**: APIæ¥å£å®Œæ•´æµ‹è¯•
  - åŸºç¡€ç«¯ç‚¹æµ‹è¯•
  - å­—æ®µåå…¼å®¹æ€§
  - é”™è¯¯å¤„ç†
  - æ–‡ä»¶ä¸Šä¼ å¤„ç†

- **test_audio_format_quality.py**: éŸ³é¢‘æ ¼å¼å’Œè´¨é‡æµ‹è¯•
  - æ”¯æŒçš„éŸ³é¢‘æ ¼å¼
  - éŸ³è´¨é€‰é¡¹
  - æ ¼å¼è½¬æ¢

### é›†æˆæµ‹è¯• (integration/)
æµ‹è¯•å¤šä¸ªç»„ä»¶ä¹‹é—´çš„äº¤äº’ï¼ŒåŒ…æ‹¬ï¼š

- **test_api_response_format.py**: APIå“åº”æ ¼å¼é›†æˆæµ‹è¯•
  - æˆåŠŸå“åº”æ ¼å¼éªŒè¯
  - é”™è¯¯å“åº”æ ¼å¼éªŒè¯
  - å‰ç«¯å…¼å®¹æ€§æ£€æŸ¥
  - å“åº”å¤´æµ‹è¯•

- **test_frontend_integration.py**: å‰ç«¯åŠŸèƒ½é›†æˆæµ‹è¯•
  - é¡µé¢è®¿é—®æµ‹è¯•
  - JavaScriptæ–‡ä»¶åŠ è½½
  - CSSæ–‡ä»¶åŠ è½½
  - APIç«¯ç‚¹é›†æˆ
  - é”™è¯¯é¡µé¢æµ‹è¯•

### MCPåè®®æµ‹è¯• (mcp/)
æµ‹è¯•MCP (Model Context Protocol) ç›¸å…³åŠŸèƒ½ã€‚

## ğŸ› ï¸ æµ‹è¯•é…ç½®

### æœåŠ¡å™¨è¦æ±‚
- æµ‹è¯•æœåŠ¡å™¨åº”åœ¨ `http://localhost:8080` è¿è¡Œ
- ç®¡ç†å‘˜è´¦å·: `admin` / `admin123`

### æµ‹è¯•æ•°æ®
- æµ‹è¯•éŸ³é¢‘æ–‡ä»¶: `test/fixtures/test.mp3`
- æµ‹è¯•è¾“å‡ºç›®å½•: `test/output/`

## ğŸ“‹ æµ‹è¯•æŠ¥å‘Š

æµ‹è¯•è¿è¡Œå™¨ä¼šç”Ÿæˆè¯¦ç»†çš„æµ‹è¯•æŠ¥å‘Šï¼ŒåŒ…æ‹¬ï¼š
- æ‰§è¡Œæ—¶é—´
- æˆåŠŸ/å¤±è´¥ç»Ÿè®¡
- æ€§èƒ½æŒ‡æ ‡
- é”™è¯¯è¯¦æƒ…

```bash
# ç”ŸæˆJSONæ ¼å¼çš„æµ‹è¯•æŠ¥å‘Š
python run_tests.py --output test_report.json
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æµ‹è¯•
1. æ ¹æ®åŠŸèƒ½ç±»å‹é€‰æ‹©åˆé€‚çš„ç›®å½• (unit/integration/mcp)
2. åˆ›å»ºæ–°çš„æµ‹è¯•æ–‡ä»¶æˆ–åœ¨ç°æœ‰æ–‡ä»¶ä¸­æ·»åŠ æµ‹è¯•æ–¹æ³•
3. æ›´æ–° `run_tests.py` ä»¥åŒ…å«æ–°æµ‹è¯•
4. æ›´æ–°æœ¬READMEæ–‡æ¡£

### æµ‹è¯•å‘½åè§„èŒƒ
- æµ‹è¯•æ–‡ä»¶: `test_<åŠŸèƒ½å>.py`
- æµ‹è¯•ç±»: `Test<åŠŸèƒ½å>`
- æµ‹è¯•æ–¹æ³•: `test_<å…·ä½“åŠŸèƒ½>()`

### æµ‹è¯•ç¼–å†™åŸåˆ™
1. æ¯ä¸ªæµ‹è¯•åº”è¯¥ç‹¬ç«‹å¯è¿è¡Œ
2. ä½¿ç”¨æ¸…æ™°çš„æ–­è¨€å’Œé”™è¯¯æ¶ˆæ¯
3. é€‚å½“çš„æµ‹è¯•æ•°æ®æ¸…ç†
4. åŒ…å«æ€§èƒ½æµ‹è¯•ï¼ˆå¦‚é€‚ç”¨ï¼‰

## ğŸ“ˆ æœ€è¿‘æ›´æ–°

### 2024å¹´æµ‹è¯•é‡ç»„
- âœ… å°†æ ¹ç›®å½•æµ‹è¯•è„šæœ¬é‡ç»„åˆ°å¯¹åº”æµ‹è¯•ç›®å½•
- âœ… åˆå¹¶ `test_admin_performance.py` åˆ° `unit/test_admin_panel.py`
- âœ… åˆå¹¶ `test_api.py` åˆ° `unit/test_api.py`
- âœ… ç§»åŠ¨ `test_api_response_format.py` åˆ° `integration/`
- âœ… ç§»åŠ¨ `test_frontend_fix.py` åˆ° `integration/test_frontend_integration.py`
- âœ… æ›´æ–°æµ‹è¯•è¿è¡Œå™¨ä»¥æ”¯æŒæ–°çš„æµ‹è¯•ç»“æ„

## ğŸ’¡ å¸¸è§é—®é¢˜

### Q: æµ‹è¯•å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: 
1. æ£€æŸ¥æœåŠ¡å™¨æ˜¯å¦æ­£åœ¨è¿è¡Œ
2. ç¡®è®¤æµ‹è¯•æ•°æ®æ–‡ä»¶å­˜åœ¨
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
4. æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œç«¯å£

### Q: å¦‚ä½•è·³è¿‡æŸäº›æµ‹è¯•ï¼Ÿ
A: ä½¿ç”¨unittestçš„skipè£…é¥°å™¨æˆ–åœ¨æµ‹è¯•ä¸­è°ƒç”¨skipTest()

### Q: å¦‚ä½•å¢åŠ æµ‹è¯•è¦†ç›–ç‡ï¼Ÿ
A: 
1. ä½¿ç”¨coverageå·¥å…·åˆ†æä»£ç è¦†ç›–ç‡
2. æ·»åŠ è¾¹ç•Œæ¡ä»¶æµ‹è¯•
3. å¢åŠ é”™è¯¯åœºæ™¯æµ‹è¯•

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
- é¡¹ç›®æ–‡æ¡£: `docs/`
- æµ‹è¯•æŒ‡å—: `test/TESTING_GUIDE.md`
- é—®é¢˜æŠ¥å‘Š: GitHub Issues 